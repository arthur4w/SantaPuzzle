<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secret Santa Celebration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background-color: #f1f1f1;
            margin: 0;
            overflow: hidden;
        }

        h1 {
            font-size: 40px;
            color: #2d2d2d;
            margin-bottom: 20px;
        }

        .snowflake {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            opacity: 0.7;
            animation: fall linear infinite, drift linear infinite;
        }

        @keyframes fall {
            0% { top: -10px; }
            100% { top: 100vh; }
        }

        @keyframes drift {
            0% { transform: translateX(0); }
            100% { transform: translateX(calc(100vw * 0.3)); }
        }

        #wheel {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            border: 5px solid #000;
            position: relative;
            margin: 50px auto;
            background: conic-gradient(#f00 0% 25%, #0f0 25% 50%, #00f 50% 75%, #ff0 75% 100%);
            transition: transform 3s ease-out;
        }

        #pointer {
            position: absolute;
            top: -10px;
            left: 140px;
            width: 20px;
            height: 50px;
            background: #000;
            transform-origin: top center;
            transition: transform 2s ease-out;
            z-index: 2;
        }

        button {
            padding: 10px 20px;
            font-size: 18px;
            background-color: #00cc66;
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 5px;
        }

        button:hover {
            background-color: #00994d;
        }

        .progress-bar {
            height: 5px;
            width: 0;
            background-color: #00cc66;
            margin: 20px auto;
            transition: width 1s;
        }
    </style>
</head>
<body>

    <h1>Secret Santa Celebration</h1>
    <button id="startButton">Start Celebration</button>

    <div id="wheelContainer" style="display: none;">
        <div id="wheel"></div>
        <div id="pointer"></div>
        <button id="spinButton">Spin</button>
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <script>
        const startButton = document.getElementById('startButton');
        const wheelContainer = document.getElementById('wheelContainer');
        const spinButton = document.getElementById('spinButton');
        const progressBar = document.getElementById('progressBar');

        let giftItems = [
            { name: 'Perfume', description: 'To smell good while making food delicious', weight: 5 },
            { name: 'Backpack', description: 'To carry most things you love', weight: Math.random() * 30 + 15 },
            { name: 'Guidebook', description: 'So you don\'t get lost', weight: Math.random() * 30 + 15 },
            { name: 'Plane Tickets', description: 'You get to spend more during stay', weight: Math.random() * 30 + 15 }
        ];

        // Function to create snowflakes with random properties
        function createSnowflake() {
            const snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            const size = Math.random() * 10 + 5; // Random size between 5px and 15px
            const startPosX = Math.random() * window.innerWidth; // Random starting position
            const duration = Math.random() * 3 + 2; // Random falling speed (2s to 5s)
            const angle = Math.random() * 360; // Random angle for rotation

            snowflake.style.width = `${size}px`;
            snowflake.style.height = `${size}px`;
            snowflake.style.left = `${startPosX}px`;
            snowflake.style.animationDuration = `${duration}s`;
            snowflake.style.animationDelay = `${Math.random() * 5}s`; // Delay for staggered effect
            snowflake.style.transform = `rotate(${angle}deg)`;

            document.body.appendChild(snowflake);
        }

        setInterval(createSnowflake, 100);

        // Start Celebration Button
        startButton.addEventListener('click', function () {
            startButton.style.display = 'none';
            wheelContainer.style.display = 'block';
        });

        // Function to generate random weights for the gift items
        function randomizeWeights() {
            const remainingWeight = 100 - 5; // 5% for Perfume
            const randomWeights = [
                Math.random() * (remainingWeight / 2),
                Math.random() * (remainingWeight / 2),
                Math.random() * (remainingWeight / 2)
            ];
            const total = randomWeights.reduce((sum, weight) => sum + weight, 0);
            randomWeights[0] = (randomWeights[0] / total) * remainingWeight;
            randomWeights[1] = (randomWeights[1] / total) * remainingWeight;
            randomWeights[2] = remainingWeight - randomWeights[0] - randomWeights[1];
            return [randomWeights[0], randomWeights[1], randomWeights[2]];
        }

        // Function to spin the wheel
        spinButton.addEventListener('click', function () {
            const weights = randomizeWeights();
            giftItems[1].weight = weights[0];
            giftItems[2].weight = weights[1];
            giftItems[3].weight = weights[2];

            const totalWeight = giftItems.reduce((sum, item) => sum + item.weight, 0);
            const targetSector = 5;  // Always land on Perfume

            const rotation = (360 * 5) + (Math.random() * 360);
            wheel.style.transform = `rotate(${rotation}deg)`;

            progressBar.style.width = '100%';  // Show progress animation

            setTimeout(() => {
                alert(`The gift is: ${giftItems[0].name} - ${giftItems[0].description}`);
            }, 3000); // After spinning, show gift announcement
        });
    </script>

</body>
</html>
